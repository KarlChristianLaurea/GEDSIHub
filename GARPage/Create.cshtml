@page "{gpbId:int}"
@model GADApplication.Pages.GARPage.CreateGARModels.CreateGARModel
@{
    ViewData["Title"] = "Create GAR for GPB";
}

<h1 class="text-center mb-4">Create GAR</h1>

<div class="container">
    <form method="post" enctype="multipart/form-data" class="needs-validation" novalidate>
        <div class="row">
            <div class="col-md-8 offset-md-2">

                <!-- Hidden field for GPBId -->
                <input type="hidden" asp-for="GAR.GPBId" />

                <!-- Display GPB Information in read-only mode -->
                <h4>GPB Details</h4>
                <div class="form-group">
                    <label>GPB Year</label>
                    <input class="form-control" value="@Model.GAR.GPB.Year" readonly />
                </div>

                <div class="form-group">
                    <label>Total GAA or Budget</label>
                    <input class="form-control" value="@Model.GAR.GPB.TotalGAAOrBudget" readonly />
                </div>

                <div class="form-group">
                    <label>MFO/PAP or PPA</label>
                    <input class="form-control" value="@Model.GAR.GPB.MFOPAPOrPPA" readonly />
                </div>

                <div class="form-group">
                    <label>Responsible Unit</label>
                    <input class="form-control" value="@Model.GAR.GPB.ResponsibleUnit" readonly />
                </div>

                <!-- GAR Activities Section -->
                <h4 class="mt-4">GAR Activities</h4>

                @if (Model.GAR?.GARActivities != null && Model.GAR.GARActivities.Count > 0)
                {
                    @for (int i = 0; i < Model.GAR.GARActivities.Count; i++)
                    {
                        <div class="card mt-3">
                            <div class="card-header">
                                <h5>Activity: @Model.GAR.GARActivities[i].ActivityName</h5>
                            </div>
                            <div class="card-body">

                                <!-- Hidden input for ActivityId -->
                                <input type="hidden" asp-for="GAR.GARActivities[i].ActivityId" />

                                <!-- Display Read-Only GPB Activity Info -->
                                <div class="form-group">
                                    <label>Activity Type</label>
                                    <input class="form-control" value="@Model.GAR.GARActivities[i].ActivityType" readonly />
                                </div>
                                <div class="form-group">
                                    <label>Activity Name</label>
                                    <input class="form-control" value="@Model.GAR.GARActivities[i].ActivityName" readonly />
                                </div>

                                <div class="form-group">
                                    <label>Cause</label>
                                    <input class="form-control" value="@Model.GAR.GARActivities[i].Cause" readonly />
                                </div>

                                <div class="form-group">
                                    <label>Performance Indicators</label>
                                    <input class="form-control" value="@Model.GAR.GARActivities[i].PerformanceIndicators" readonly />
                                </div>

                                <div class="form-group">
                                    <label>Source Budget</label>
                                    <input class="form-control" value="@Model.GAR.GARActivities[i].SourceBudget" readonly />
                                </div>

                                <!-- Display Read-Only GPB Activity Info -->
                                <div class="form-group">
                                    <label>Objective</label>
                                    <input class="form-control" value="@Model.GAR.GARActivities[i].Objective" readonly />
                                </div>
                                <div class="form-group">
                                    <label>Budget</label>
                                    <input class="form-control" value="@Model.GAR.GARActivities[i].Budget" readonly />
                                </div>
                                
                                <!--Disable if it is already populated-->
                                <!-- Input Fields for Actual Result and Actual Cost -->
                                <div class="form-group">
                                    <label asp-for="GAR.GARActivities[i].ActualResult" class="control-label"></label>
                                    <input asp-for="GAR.GARActivities[i].ActualResult" class="form-control" />
                                    <span asp-validation-for="GAR.GARActivities[i].ActualResult" class="text-danger"></span>
                                </div>

                                <div class="form-group">
                                    <label asp-for="GAR.GARActivities[i].ActualCost" class="control-label"></label>
                                    <input asp-for="GAR.GARActivities[i].ActualCost" class="form-control" />
                                    <span asp-validation-for="GAR.GARActivities[i].ActualCost" class="text-danger"></span>
                                </div>
                                <div class="form-group">
                                    <label asp-for="GAR.GARActivities[i].NatureOfEvent" class="control-label"></label>
                                    <input asp-for="GAR.GARActivities[i].NatureOfEvent" class="form-control" />
                                    <span asp-validation-for="GAR.GARActivities[i].NatureOfEvent" class="text-danger"></span>
                                </div>
                                <div class="form-group">
                                    <label asp-for="GAR.GARActivities[i].NumberOfParticipants" class="control-label"></label>
                                    <input asp-for="GAR.GARActivities[i].NumberOfParticipants" class="form-control" />
                                    <span asp-validation-for="GAR.GARActivities[i].NumberOfParticipants" class="text-danger"></span>
                                </div>
                                <div class="form-group">
                                    <label asp-for="GAR.GARActivities[i].OrganizingTeamMembers" class="control-label"></label>
                                    <input asp-for="GAR.GARActivities[i].OrganizingTeamMembers" class="form-control" />
                                    <span asp-validation-for="GAR.GARActivities[i].OrganizingTeamMembers" class="text-danger"></span>
                                </div>
                                <div class="form-group">
                                    <label>Special Order File (PDF)</label>
                                    <input type="file" asp-for="GAR.GARActivities[i].File1" class="form-control" />
                                </div>

                                <div class="form-group">
                                    <label>Pictures (PDF)</label>
                                    <input type="file" asp-for="GAR.GARActivities[i].File2" class="form-control" />
                                </div>

                                <div class="form-group">
                                    <label>Budget Report File (PDF)</label>
                                    <input type="file" asp-for="GAR.GARActivities[i].File3" class="form-control" />
                                </div>

                                <div class="form-group">
                                    <label>Evaluation Attendance File (PDF)</label>
                                    <input type="file" asp-for="GAR.GARActivities[i].File4" class="form-control" />
                                </div>

                            </div>
                        </div>
                    }
                }
                else
                {
                    <p>No activities found for this GAR.</p>
                }

                <!-- Submit Button -->
                <div class="form-group mt-4">
                    <input type="submit" value="Create GAR" class="btn btn-primary btn-lg btn-block" />
                </div>
            </div>
        </div>
    </form>
</div>
@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        // Add JavaScript functions as necessary for dynamic form manipulation
    </script>
}